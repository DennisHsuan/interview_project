{% extends 'base.html' %}
{% load static %}
{% block title %}
<title>菜單-新品上市</title>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
<!-- Bootstrap js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
    crossorigin="anonymous"></script>
<style>
    img {
        width: 100%;
        height: 800px;
    }

    .image {
        margin-top: 20px;
        width: 100%;
        height: auto;


        display: block;
        opacity: 0;
        transition: opacity 3s;
    }

    .loaded {
        opacity: 1;
    }
</style>
{% endblock %}
{% block content %}
<div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-touch="true">
    <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">
        <!-- carousel Indicators(輪播指標) -->
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2"></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{% static 'images/new_products/oko.png' %}" class="d-block w-100" loading="lazy" alt="...">
            </div>
            <div class="carousel-item">
                <img src="{% static 'images/new_products/cold.png' %}" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="{% static 'images/new_products/litchi.png' %}" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="{% static 'images/new_products/lemon.png' %}" class="d-block w-100" alt="...">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">上一頁</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">下一頁</span>
        </button>
    </div>
    <!-- Lazy load(延遲加載) -->
    <div class="row mt-1">
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
        <div class="col-4">
            <img class="image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" alt="示例圖片1">
        </div>
    </div>
</div>
<!-- addEventListener 增加監聽 -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const lazyloadImages = document.querySelectorAll(".lazyload");  //選擇全部的文件檔案(".lazyload")
        const observer = new IntersectionObserver(function (entries, observer) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.classList.add("loaded");
                    observer.unobserve(img);
                }
            });
        });

        lazyloadImages.forEach(img => {
            observer.observe(img);
        });
    });
</script>
{% endblock %}