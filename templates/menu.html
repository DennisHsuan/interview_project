{% extends 'base.html' %}
{% load static %}
{% block title %}
<title>菜單-新品上市</title>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
<!-- Bootstrap js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
    crossorigin="anonymous"></script>
<style>
    #ind.active{
        background-color: red;
    }
    #ind{
        background-color: black;
    }
    #inner{
        width: 100%;
        height: 800px;
        padding-top: 40px;
    }
    #menu{
        width: 100%;
        height: 250px;
    }
    #movie{
        width: 100%;
        height: 500px;
        display: block;
    }
    .row{
        padding: 20px;
    }
    .image {
        opacity: 0;
        transition: opacity 3s;
    }

    .loaded {
        opacity: 1;
    }

    h2 {
        padding-top: 20px;
        font-weight: bold;
    }
    /* span 設定背景跟hover(滑動)變色 */
    span{
        background-color:black;
    }
    span:hover{
        background-color: red;
    }
    .citest{
        top:580px;
    }
</style>
{% endblock %}
{% block content %}
<!-- 設定輪播時的(slide)滑動跟(fade)淡入、data-bs-ride="carousel"頁面加載就開始輪播-->
<div id="carousel_1" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <!-- carousel Indicators(輪播指標) 設定指標區塊-->
    <div class="carousel-indicators">
        <button type="button" id="ind" data-bs-target="#carousel_1" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" id="ind" data-bs-target="#carousel_1" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" id="ind" data-bs-target="#carousel_1" data-bs-slide-to="2" aria-label="Slide 3"></button>
        <button type="button" id="ind" data-bs-target="#carousel_1" data-bs-slide-to="3" aria-label="Slide 4"></button>
    </div>
    <!-- 輪播時的照片 -->
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img class="d-block w-100 image lazyload" data-src="{% static 'images/new_products/oko.png' %}" id="inner" loading="lazy" alt="...">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100 image lazyload" data-src="{% static 'images/new_products/cold.png' %}" id="inner" alt="...">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100 image lazyload" data-src="{% static 'images/new_products/litchi.png' %}" id="inner" alt="...">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100 image lazyload" data-src="{% static 'images/new_products/lemon.png' %}" id="inner" alt="...">
        </div>
    </div>
    <!-- 上下頁箭頭設定 -->
    <button class="carousel-control-prev" type="button" data-bs-target="#carousel_1" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">上一頁</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carousel_1" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">下一頁</span>
    </button>
</div>
<!-- 設定一個Layout網格(grid)-->
<div class="container text-center">
    <h2 class="text-danger fw-bold">菜單介紹</h2>
    <div class="row">
        {% for product in products %}
        <div class="col">
            <!-- 在包一個元件卡片(card) my-3(margin Y象限-距離3)-->
            <div class="card my-3 mx-auto" style="width: 18rem;">
                <!-- Lazyload(延遲加載) -->
                <img class="card-img-top image lazyload" data-src="/static/images/products/{{product.pimage}}" id="menu" alt="...">
                <div class="card-body">
                    <!-- fw-bold 字體加粗 -->
                    <h5 class="card-title fw-bold">{{ product.pname }}</h5>
                    <p class="card-text">{{ product.pprice}}元</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!--第二個輪播-->
<div class="container text-center my-3 mx-auto">
    <h2 class="text-danger fw-bold">電影欣賞</h2>
    <h5 class="text-secondary fw-bold">每天下午14點到晚上20點隨機播放</h5>
    <div id="carousel_2" class="carousel slide" data-bs-ride="carousel">
        <!-- carousel Indicators(輪播指標) 設定指標區塊-->
        <div class="carousel-indicators citest">
            <button type="button" id="ind" data-bs-target="#carousel_2" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" id="ind" data-bs-target="#carousel_2" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" id="ind" data-bs-target="#carousel_2" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <!-- 輪播時的照片 -->
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="row">
                    <div class="col">
                        <a herf="#" title="測試"><div> 
                            <img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_1.jpg' %}" id="movie" loading="lazy" alt="...">
                            <h6>上映日 2023-03-30</h6>
                            <h5>龍與地下城：盜賊榮耀</h5>
                        </div></a>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_2.jpg' %}"  id="movie" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-23</h6></a>
                        <h5>杏仁與海馬</h5>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_3.jpg' %}" id="movie" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-23</h6></a>
                        <h5>名偵探柯南 灰原哀物語〜黑鐵的神祕列車〜</h5>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_4.jpg' %}" id="movie" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                </div>
                
            </div>
            <div class="carousel-item">
                <div class="row">
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_5.jpg' %}" id="movie" loading="lazy" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_6.jpg' %}" id="movie" loading="lazy" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_7.jpg' %}" id="movie" loading="lazy" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_8.jpg' %}" id="movie" loading="lazy" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="row">
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_9.jpg' %}" id="movie" loading="lazy" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_10.jpg' %}" id="movie" loading="lazy" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_11.jpg' %}" id="movie" loading="lazy" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                    <div class="col">
                        <a herf="#" title="測試"></a><img class="d-block w-100 image lazyload" data-src="{% static 'images/movies/245_12.jpg' %}" id="movie" loading="lazy" alt="...">
                        <a href="#" title="測試"><h6>上映日 2023-03-30</h6></a>
                        <h5>龍與地下城：盜賊榮耀</h5>
                    </div>
                </div>
            </div>
        </div>
        <!-- 上下頁箭頭設定 -->
        <button class="carousel-control-prev" type="button" data-bs-target="#carousel_2" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">上一頁</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carousel_2" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">下一頁</span>
        </button>
    </div>
</div>
<!-- addEventListener 增加監聽 -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const lazyloadImages = document.querySelectorAll(".lazyload");  //選擇全部的文件檔案(".lazyload")
        const observer = new IntersectionObserver(function (entries, observer) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.classList.add("loaded");
                    observer.unobserve(img);
                }
            });
        });
        lazyloadImages.forEach(img => {
            observer.observe(img);
        });
    });
</script>
{% endblock %}